webpackJsonp([9],{"+TOD":function(e,s,t){"use strict";var a={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("page",{attrs:{navbar:"navbar-sm",title:e.post.title}},[t("section",{staticClass:"hero"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container is-desktop"},[t("div",{staticClass:"is-cover"},[t("h1",{staticClass:"is-size-1 has-text-centered has-text-slate mgb-5"},[e._v("Contact us")]),t("h2",{staticClass:"subtitle mgt-5 has-font-weight-300 is-size-6"},[e._v(e._s(e.post.excerpt))])]),t("section",{staticClass:"section has-fullheight"},[t("div",{staticClass:"columns is-contact-form mgb-30"},[t("div",{staticClass:"column is-6"},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[e._v("Name")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.name,expression:"fields.name"}],staticClass:"input",attrs:{type:"text",placeholder:"name",maxlength:"100"},domProps:{value:e.fields.name},on:{input:function(s){s.target.composing||e.$set(e.fields,"name",s.target.value)}}})]),e.errors.name?t("p",{staticClass:"help is-danger"},[e._v(e._s(e.errors.name))]):e._e()]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[e._v("Email")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.fields.email,expression:"fields.email"}],staticClass:"input",attrs:{type:"email",placeholder:"email"},domProps:{value:e.fields.email},on:{input:function(s){s.target.composing||e.$set(e.fields,"email",s.target.value)}}})]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.email,expression:"errors.email"}],staticClass:"help is-danger"},[e._v(e._s(e.errors.email))])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[e._v("Subject")]),t("div",{staticClass:"control"},[t("div",{staticClass:"select has-placeholder"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.fields.subject,expression:"fields.subject"}],attrs:{placeholder:"Select"},on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.fields,"subject",s.target.multiple?t:t[0])}}},[t("option",{attrs:{value:""}},[e._v("Select subject")]),t("option",{attrs:{value:"general"}},[e._v("General support")]),t("option",{attrs:{value:"feedback"}},[e._v("Feedback")]),t("option",{attrs:{value:"site-fault"}},[e._v("Site fault")]),t("option",{attrs:{value:"offer-error"}},[e._v("Offer not working")]),t("option",{attrs:{value:"auth-error"}},[e._v("Register/login problem")])])])]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.subject,expression:"errors.subject"}],staticClass:"help is-danger"},[e._v(e._s(e.errors.subject))])])]),t("div",{staticClass:"column is-6"},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[e._v("Message")]),t("div",{staticClass:"control is-expanded"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.fields.message,expression:"fields.message"}],staticClass:"textarea is-fullwidth",attrs:{placeholder:"your message",maxlength:"1000"},domProps:{value:e.fields.message},on:{input:function(s){s.target.composing||e.$set(e.fields,"message",s.target.value)}}})]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.message,expression:"errors.message"}],staticClass:"help is-danger"},[e._v(e._s(e.errors.message))])])])]),t("p",{staticClass:"field"},[t("button",{staticClass:"button is-primary",class:{"has-loader":e.hasLoader},attrs:{disabled:e.hasError},on:{click:function(s){return s.preventDefault(),e.submitForm(s)}}},[e._v("Submit")]),e.submitError?t("span",{staticClass:"has-text-danger mgl-15"},[e._v("Submission failed")]):e._e(),e.submitSuccess?t("span",{staticClass:"has-text-success mgl-15"},[e._v("Sent successfully")]):e._e()])])])])])])},staticRenderFns:[]};s.a=a},Bxut:function(e,s,t){"use strict";var a=t("Xxa5"),r=t.n(a),i=t("exGp"),l=t.n(i),n=t("fZjL"),o=t.n(n),c=t("mtWM"),u=t.n(c);s.a={name:"ContactUs",head:function(){return{title:this.post.metaTitle||"Contact Us - SaleTag",meta:[{hid:"description",name:"description",content:this.post.metaDescription||""}]}},data:function(){return{fields:{name:"",email:"",subject:"",message:""},errors:{},hasError:!1,clearForm:!1,hasLoader:!1,submitError:null,submitSuccess:null}},methods:{updateField:function(e,s){this.fields[e]=s.target.value,this.checkField(e)},checkField:function(e){if(!this.clearForm){var s=this.fields[e].trim();this.errors[e]&&delete this.errors[e],"name"===e&&(s.length<1?this.errors[e]="name is too short":s.length>100?this.errors[e]="name is too long":s.match(/[^a-z0-9\s]/gi)&&(this.errors[e]="invalid name")),"subject"===e&&(this.errors.subject&&delete this.errors.subject,-1===["general","feedback","site-fault","offer-error","auth-error"].indexOf(s)&&(this.errors[e]="invalid subject")),"email"===e&&(this.errors.email&&delete this.errors.message,this.$helpers.validateEmail(s)||(this.errors.email="invalid email address")),"message"===e&&(this.errors.message&&delete this.errors.message,s.length<1?this.errors[e]="message is too short":s.length>1e3&&(this.errors[e]="message is too long")),this.hasError=o()(this.errors).length>0}},submitForm:function(){var e=l()(r.a.mark(function e(){var s,t,a,i=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o()(this.fields).forEach(function(e){return i.checkField(e)}),!this.hasError){e.next=4;break}return e.abrupt("return");case 4:return s="https://api.saletag.co.uk/api/v1/contact",this.hasLoader=!0,e.next=8,u.a.post(s,this.fields);case 8:t=e.sent,a=t.data,this.hasLoader=!1,a.success&&(this.submitSuccess=!0,this.clearForm=!0,o()(this.fields).forEach(function(e){return i.fields[e]=""}),this.$nextTick(function(){return i.clearForm=!1})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),this.hasLoader=!1,this.submitError=!0;case 18:case"end":return e.stop()}},e,this,[[0,14]])}));return function(){return e.apply(this,arguments)}}()},watch:{"fields.name":function(){this.checkField("name")},"fields.email":function(){this.errors.email&&delete this.errors.email,this.hasError=o()(this.errors).length>0},"fields.subject":function(){this.checkField("subject")},"fields.message":function(){this.checkField("message")}},asyncData:function(){var e=l()(r.a.mark(function e(s){var t,a,i;s.params;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="https://api.saletag.co.uk/api/v1/getPageData",e.next=4,u.a.post(t,{view:"post",slug:"contact-us"});case 4:return a=e.sent,i=a.data,e.abrupt("return",{post:i.post});case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}},e,this,[[0,9]])}));return function(s){return e.apply(this,arguments)}}()}},hsh2:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("Bxut"),r=t("+TOD"),i=t("VU/8")(a.a,r.a,!1,null,null,null);s.default=i.exports}});